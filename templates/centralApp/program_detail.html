{% extends "base.html" %}

{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    {% block title %}
    <title>{{program.title}} | School of the Spirit Network Global</title>
    {% endblock title %}

    <meta property='og:title' content='{{object.title}} | School of the Spirit Network Global' />
    <meta property='og:description'
        content='{{object.description}}' />
    <meta property='og:url' content='{{object.get_absolute_url}}'>
</head>

<body>
{% block content %}
<!--================ Start Header Menu Area =================-->
<header class="header_area">
    <div class="header-top">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 col-sm-6 col-4 header-top-left">
                    <a href="tel:+2349083525255">
                        <span class="lnr lnr-phone"></span>
                        <span class="text">
                            <span class="text">+234 908 352 5255</span>
                        </span>
                    </a>
                    <a href="mailto:schoolofthespiritnetwork@gmail.com">
                        <span class="lnr lnr-envelope"></span>
                        <span class="text">
                            <span class="text">schoolofthespiritnetwork@gmail.com</span>
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="main_menu">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <a class="navbar-brand logo_h" href="/"><img src="{% static 'img/logo60x37.png' %}" alt=""></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
                    <ul class="nav navbar-nav menu_nav ml-auto">
                        <li class="nav-item"><a class="nav-link" href="{% url 'index' %}">Home</a></li>
                        <li class="nav-item active"><a class="nav-link" href="{% url 'program:all' %}">Programs</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>
<!--================ End Header Menu Area =================-->


    <!--================Home Banner Area =================-->
    <section class="banner_area">
        <div class="banner_inner d-flex align-items-center">
            <div class="overlay"></div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-6">
                        <div class="banner_content text-center">
                            <h2>{{object.title}}</h2>
                            
                            <p>{{object.description}}</p>
                            <div class="page_link">
                                <a href="{% url 'index' %}">Home</a>
                                <a href="{% url 'program:all' %}">Programs</a>
                                <a href="#">{{object.title}}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--================End Home Banner Area =================-->

    <!--================Blog Area =================-->
    <section class="blog_area single-post-area section_gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 posts-list">
                    <div class="single-post row">
                        <div class="col-lg-12">
                            <div class="feature-img">
                                <img class="img-fluid" style="border-radius: 10px;" src="{{program.flyer.url}}" alt="">
                            </div>
                        </div>
                        <div class="col-lg-3  col-md-3">
                            <div class="blog_info text-right">
                                <div class="post_tag">
                                    {% if program.tag_one %}
                                    <a href="#">{{object.tag_one}}</a>
                                    {% endif %}
                                    {% if program.tag_two %}
                                    <a href="#">, {{object.tag_two}}</a>
                                    {% endif %}
                                    {% if program.tag_three %}
                                    <a href="#">, {{object.tag_three}}</a>
                                    {% endif %}
                                    {% if program.tag_four %}
                                    <a href="#">, {{program.tag_four}}</a>
                                    {% endif %}
                                </div>
                                <ul class="blog_meta list">
                                    <li title="Date Posted"><a ><i class="lnr lnr-calendar-full"></i> {{program.posted|date:"D, d M, y"}}</a> 
                                        <span id="programID" style="display: none;">{{program.id}}</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-9 col-md-9 blog_details">
                            <h2>{{program.title}}</h2>
                            <a href="#cource_resources">Go to Classroom</a><br><br>
                            {{program.body | safe}}
                        </div>
                    </div>

                    <!-- notification -->
                    {% if program.google_form and program.not_started %}
                    <div class="comments-area" style="padding: 20px;">
                        <img src="{% static 'img/idea-icon.png' %}" alt="" width="25"> If the Registration Form is not loading, 
                        please click <a href="{{program.google_form}}">Here</a> to Register Or use a large screen device.
                    </div>
                    {% endif %}
                    <!-- Comments -->
                    <a name="cource_resources"></a>
                    <div class="comments-area">
                        {% if not program.google_form and program.not_started %}
                            <p style="text-align: center;">Registration Form is not available now. Please Check back Later!</p>
                        
                        {% elif program.google_form and program.not_started %}
                            <iframe src="{{program.google_form}}" width="100%" height="1106" frameborder="0" marginheight="0"
                                marginwidth="0">Loading…
                            </iframe>
                        {% else %}
                        
                            <p style="text-align: center; color: rgba(241, 139, 139, 0.867);">Registration is Cloased !!</p>
                            <p style="text-align: center;" >Kindly Enter Program Resources PassCode to access all resources for the Sessions.</p>
                            <form action="" id="programAccessForm">
                                <input type="text" placeholder="Enter access PIN: djxowuqaxxx" id="programAccessInput">
                                <a href=""><button class="program_class_btn" type="submit">Access Classroom</button></a>
                            </form>

                            <p style="text-align: center; font-size: 0.8rem;">
                                <a href="{% url 'contact' %}" style="color: blue; text-decoration: underline;">
                                    contact us
                                </a> if you want enquiry about the program or request access.
                            </p>
                        {% endif %}
                        
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="blog_right_sidebar">
                        <aside class="single_sidebar_widget author_widget"><br>
                            <img class="author_img rounded-circle" src="{% static 'img/logo60x37.png' %}" alt="">
                            <h4>School of the Spirit Network Global</h4>
                            <p>Administrator</p>
                            <div class="social_icon">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-whatsapp"></i></a>
                            </div>
                            <p>A platform given the mandate to bringing believers into the reality of <span style="font-weight: bold;">spirituality</span> in Christ by <b>consistent</b> Growth in
                            Grace and in the Knowledge of our Lord and Savior Jesus Christ.</p>
                            <div class="br"></div>
                        </aside>
                        <aside class="single_sidebar_widget popular_post_widget">
                            <h3 class="widget_title">Other Programs</h3>
                            {% for other_program in program_list %}
                                {% if other_program.id != program.id %}
                            <!-- code to iterate across each copy/instance of a book -->
                            <div class="media post_item">
                                <div class="media-body">
                                    <a href="{{other_program.get_absolute_url}}">
                                        <h3>{{other_program.title}}</h3>
                                    </a>
                                    <p>{{ other_program.posted|timesince:current_time }} ago</p>


                                </div>
                            </div>
                                {% endif %}
                            {% endfor %}

                            <div class="br"></div>
                        </aside>
                    
                
                        <aside class="single-sidebar-widget newsletter_widget">
                            <h4 class="widget_title">Newsletter</h4>
                            <p>
                                Be the first to get notified of any of our programs and receive occasional
                                letters from us.
                            </p>
                            <form action="" method="get" id="detailForm">
                                <div class="form-group d-flex flex-row">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text"><i class="fa fa-envelope" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Your Email Address"
                                            onfocus="this.placeholder = ''" onblur="this.placeholder = 'Your Email Address'" required="">
                                    </div>
                                    <button class="bbtns" id="detailFormBtn" type="submit" style="border: none;">Subcribe</button>
                                    <br><div id="detailSubErrorMsg"></div>
                                </div>
                            </form>
                            <p class="text-bottom" style="display: none;">You can unsubscribe at any time</p>
                        </aside>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="reso-pop-out dis-none" id="reso_close">
        <button class="reso-pop-close-btn" title="Close the course resoucre centre" id="reso_close_btn">
            <img src="{% static 'img/f-icons/close.png' %}" alt="close button sign icon">
        </button>

        <div class="reso-inner-wrapper">
            <div style="background-color: #ee3e4f; display: block; padding: 20px; border-radius: 5px;" >
                This Program Have no Resources Yet! &#10060;
            </div>
        </div>
    </section>
    <section class="error">
        <div class="error-card-program in-error-card">
            
        </div>
    </section>
    <!--================Blog Area =================-->

    <script>
        let subscribeDetailForm = document.getElementById("detailForm")
            let inlineFormInput = document.getElementById("inlineFormInputGroup")
            let subscribeDetailBtn = document.getElementById("detailFormBtn")
            let detailSubErrorMsg = document.getElementById("detailSubErrorMsg")


            subscribeDetailForm.addEventListener('submit', (e) => {
                e.preventDefault();

                $.ajax({
                    type: 'POST',
                    url: `../subscribe/`,
                    data: { email: `${inlineFormInput.value}` },

                    beforeSend: () => {
                        subscribeDetailBtn.innerHTML = "SUBSCRIBING..."

                    },
                    complete: () => {
                        subscribeDetailBtn.innerHTML = "SUBSCRIBE"
                    },
                    success: (data) => {
                        // do something
                        subscribeDetailForm.reset()
                        detailSubErrorMsg.style.display = 'block';
                        detailSubErrorMsg.classList.add('success');
                        detailSubErrorMsg.innerHTML = 'Successful ✔'
                        setTimeout((e) => {
                            detailSubErrorMsg.style.display = 'none';

                        }, 2000);

                    },
                    error: (err) => {
                        // do something
                        subscribeDetailBtn.innerHTML = "ERROR, SUBSCRIBE AGAIN"
                    },
                });
                console.log(`It working ${inlineFormInput.value}`)
            });

    </script>
    <!--================ Start footer Area  =================-->
        {% endblock content %}